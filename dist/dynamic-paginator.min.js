/*!
 * Dynamic Paginator v1.0.3 (https://github.com/alameenlr/dynamic-paginator-jquery)
 * Copyright (c) Al-Ameen LR <alameenlr@outlook.com>
 * Licensed under MIT (https://github.com/alameenlr/dynamic-paginator-jquery/license.txt)
 */
(function($){var lrs_dynamic_paginator_instances={};$.fn.dynamicPaginator=function(options){let $t=this,makeLoadRequestParams=function(e){let t={},a=e.currentViewValues;for(let n in a){t[e.dpParamKeys[n]]=a[n]}return t.offset=a.pageNo*a.count-a.count,t},instancekey=function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let n=0;n<e;n++)a+=t.charAt(Math.floor(62*Math.random()));return"i_"+a},setInOption=function(e,t){lrs_dynamic_paginator_instances[e]=t},getInOption=function(e){return lrs_dynamic_paginator_instances[e]??!1},dpg_default_option={search:{placeholder:"Search",disabledItemPropertiesKeys:[]},colorTheme:"auto",getInfoURL:"",loadListURL:"",loadedListIsComplete:!1,itemsIndexKey:"index",httpRequestHeaders:{},itemProperties:[],indexedItemPropertiesKeys:[],items:[],maxPagerNumbers:10,totalItemsCount:0,setCountsPerPage:[10,20,50,100,250,500,1e3],pushToHistory:!0,showViewingStatus:!0,currentViewValues:{pageNo:1,count:10},fromStartOnSort:!1,dpParamKeys:{pageNo:"page-no",count:"count",orderBy:"order-by",orderByIn:"order-by-in",searchIn:"search-in",searchKey:"search-key",userParams:"user-params"},clientSideSearch:!0,clientSideSearchFormat:"%{{search-key}}%",userParamListener:!0,viewTemplate:'<div class="d-flex w-100 justify-content-between py-2"><div>{{searchBox}}</div><div>{{countsPerPage}}</div></div><table class="w-100"><thead><tr>{{propertiesLabel}}</tr></thead><tbody>{{itemsList}}</tbody></table><div class="d-flex w-100 justify-content-between py-2"><div class="show-status">{{viewingStatus}}</div><div>{{paginationContent}}</div></div>',paginationBlock:{hideOnSinglePage:!0,jumpTo:!0,size:"default",template:{pageNumber:'<a href="{{url}}" class="page-number">{{pageNo}}</a>',previous:'<a href="{{url}}" class="page-previous"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M9.4 233.4a32 32 0 0 0 0 45.3l192 192a32 32 0 0 0 45.3-45.3L77.3 256 246.6 86.6a32 32 0 0 0-45.3-45.3l-192 192z" fill="currentColor"/></svg></a>',next:'<a href="{{url}}" class="page-next"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M310.6 233.4a32 32 0 0 1 0 45.3l-192 192a32 32 0 0 1-45.3-45.3L242.7 256 73.4 86.6a32 32 0 0 1 45.3-45.3l192 192z" fill="currentColor"/></svg></a>',more:'<a class="page-more">...</a>',jumpTo:'<form action="#"><div class="d-flex border jump-to-box"><input type="number" name="jump-to-page" class="lrs-dpf no-border no-outline no-bg number"><button type="submit" class="no-border no-outline no-bg">Go</button></div></form>',background:!0}},pageContentLoader:"<div class='dpg-loading'></div>",makeItemPropertyLabel:(e,t,a)=>t?`<th tabindex="0" role="columnheader button" data-property-key="${e.key}" class="head-sort${a?" "+a:""}"${a?' title=" Sort '+("asc"==a?"descending":"ascending")+'"':""}>${e.label}</th>`:`<th data-property-key="${e.key}">${e.label}</th>`,makeItem:(e,t,a,n)=>{let r=e=>e?.toString().replace(/[\"]/gm,"&quot;").replace(/[\']/gm,"&apos;");return"<tr>"+t.map((t=>a==t.key?`<td data-key="${t.key}" data-value="${r(e[t.key])}">${(e=>{let t=new RegExp("("+n.replace(/[\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")","gui");return e.toString().replace(t,"<span class='search-match'>$1</span>")})(e[t.key])}</td>`:`<td data-key="${t.key}" data-value="${r(e[t.key])}">${e[t.key]}</td>`)).join("")+"</tr>"},makeViewingStatus:(e,t,a)=>{if(0==a)return"0 entries";let n=e*t;return`Showing ${n-t+1} to ${n>a?a:n} of ${a} entries`},makeSearchBox:e=>{if(0!=e.search){let t=e.search,a="";return e.itemProperties.forEach((t=>{a+=e.indexedItemPropertiesKeys.indexOf(t.key)>-1&&e.search.disabledItemPropertiesKeys.indexOf(t.key)<0?`<option value="${t.key}" ${e.currentViewValues.searchIn==t.key?" selected":""}>${t.label}</option>`:""})),'<form action="#"><div class="d-flex border search-box">'+(a.length>0?`<select name="${e.dpParamKeys.searchIn}" class="no-border no-outline no-bg">`+a+"</select>":"")+`<input type="text" name="${e.dpParamKeys.searchKey}" placeholder="${t.placeholder}" class="lrs-dpf no-border no-outline no-bg" value="${e.currentViewValues.searchKey??""}"><button type="submit" class="no-border no-outline no-bg"><svg width="18" height="14" style="fill:currentColor;opacity:0.3;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M416 208c0 45.9-14.9 88.3-40 122.7l126.6 126.7c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg></button></div></form>`}return""},makeCountSelection:function(e,t,a,n){let r="";return n.forEach((e=>{r+=`<option value="${e}" ${e==t?" selected":""}>${e}</option>`})),`<div class="set-view-count"><select name="${e}" class="lrs-dpf border no-bg no-outline">`+r+"</select><span> Items per page.</span></div>"}},currentViewValueKeys=["pageNo","count","orderBy","orderByIn","searchIn","searchKey","userParams"],DPFNS={getLRSDPGElement:function(e,t){return t.find('[data-lrs-dpg-elm="'+e+'"]')},setUserParamsInElement(e,t){for(let a in t.currentViewValues.userParams)e.find('.dynamic-paginator-input[name="'+a+'"]').val(t.currentViewValues.userParams[a])},functionNametoFunction:function(option){for(let k in option)if(["makeItemPropertyLabel","makeItem","makeViewingStatus","makeSearchBox","makeCountSelection"].indexOf(k)>-1&&"string"==typeof option[k])try{let evalue=eval(option[k]);if(!evalue)throw option[k]+":is not defined.";option[k]=evalue}catch(e){console.error(e)}return option},generateSortImageURL:function(e,t){let a={pt:"",o:"1",c:"#333333"};return t&&(a.c="#d4d4d4"),0==e?(a.pt="M4.4 9.8h15.2c.3 0 .6 0 .8-.3.2-.2.3-.5.3-.8s0-.5-.3-.7L12.8.3c-.3-.2-.5-.3-.8-.3s-.5.1-.8.3L3.6 8a1 1 0 0 0-.3.7c0 .3 0 .6.3.8.2.2.5.3.8.3zm15.2 4.4H4.4a1 1 0 0 0-.8.3c-.2.2-.3.5-.3.8s0 .5.3.7l7.6 7.7c.3.2.5.3.8.3s.5-.1.8-.3l7.6-7.7c.2-.2.3-.4.3-.7s0-.6-.3-.8a1 1 0 0 0-.8-.3z",a.o="0.3"):"asc"==e?a.pt="M4.4 17h15.2c.3 0 .6-.2.8-.4.2-.2.3-.5.3-.8a1 1 0 0 0-.3-.8l-7.6-7.6c-.3-.2-.5-.3-.8-.3s-.5.1-.8.3l-7.6 7.7a1 1 0 0 0-.3.7c0 .3 0 .6.3.8.2.2.5.3.8.3z":"desc"==e&&(a.pt="M19.6 7H4.4a1 1 0 0 0-.8.4c-.2.2-.3.5-.3.8s0 .5.3.8l7.6 7.6c.3.2.5.3.8.3s.5-.1.8-.3l7.6-7.7c.2-.2.3-.4.3-.7s0-.6-.3-.8a1 1 0 0 0-.8-.3z"),""!=a.pt?'url("data:image/svg+xml,'+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" xml:space="preserve"><path fill="${a.c}" fill-opacity="${a.o}" d="${a.pt}"/></svg>`)+'")':"none"},contentLoader:function(e,t,a){let n=DPFNS.getLRSDPGElement("items-list",e);if(a){if(0==n.parent().find(".lrs-dpg-content-loader").length){let e=document.createElement("div");e.innerHTML=t.pageContentLoader;let a=n.height();e.style.height=a+"px",e.style.width=n.width()+"px",0==a&&n.addClass("null-loader"),e.classList.add("lrs-dpg-content-loader"),n.prepend(e)}}else n.removeClass("null-loader"),$.each(n.parent().find(".lrs-dpg-content-loader"),(function(){this.remove()}))},upadateViewingStatus:function(e,t,a=t.currentViewValues.pageNo,n=t.currentViewValues.count,r=t.totalItemsCount){DPFNS.getLRSDPGElement("viewing-status",e).html(t.makeViewingStatus(a,n,r))},urlParamsToCurrentViewPageValues:function(e,t){let a=t.currentViewValues;for(let n of currentViewValueKeys){let r=t.dpParamKeys[n];if(e[r])if("userParams"==n){let t=atob(e[r]);t=JSON.parse(t),a[n]=t}else{let o=typeof t.currentViewValues[n];a[n]="number"==o?parseInt(e[r])??0:e[r]}}return a},setOptionFromVars:function(e){if(e.currentViewValues.count=e.currentViewValues.count??DefaultOptions.dpdefaultOption.currentViewValues.count,e.pushToHistory){let t=DPGURLS.splitURLToParams();e.currentViewValues=DPFNS.urlParamsToCurrentViewPageValues(t.gets,e)}return e},makeSearchRegEx:function(e,t="{{search-key}}%"){return e=e.replace(/\%/gi,"!%"),t=(t=t.replace(/\{\{search-key\}\}/gm,e)).replace(/[\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t=/^%/.test(t)?t.replace(/^%/,".*"):"^"+t,/([^\!]%)$/.test(t)&&(t=t.replace(/%$/,".*")),t=t.replace(/\!\%/gm,"%"),new RegExp(t,"giu")},jsTableSearch:function(e,t){let a=t.currentViewValues,n='[data-lrs-dpg-elm="items-list"]',r=e.find(n),o=e.find(n+">*");if(a.searchKey){let n=t.currentViewValues.searchIn??t.itemProperties[0].key,i=e=>e?.getAttribute("data-value")??e?.textContent??"",s='[data-key="'+n+'"]',l=(document.createElement(r[0]?.tagName??"div"),DPFNS.makeSearchRegEx(a.searchKey??"",t.clientSideSearchFormat)),c=new RegExp("("+a.searchKey.replace(/[\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")","gui"),u=0;$.each(o,(function(e,t){t.style.removeProperty("display"),t?.querySelectorAll(".search-match").forEach((e=>{e.insertAdjacentHTML("beforebegin",e.innerHTML),e.remove()}));let a=t.querySelector(s);i(a).match(l)?(t?.querySelectorAll('[data-key="'+n+'"]').forEach((e=>{e.innerHTML=i(e)?.replace(c,"<span class='search-match'>$1</span>").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/&lt;span\sclass='search-match'&gt;((?!&lt;\/span&gt;).*?)&lt;\/span&gt;/g,"<span class='search-match'>$1</span>")})),u++):t.style.display="none"})),triggerEvents.eventPageLoaded(e,t),DPFNS.upadateViewingStatus(e,t,1,u,u)}else $.each(o,(function(e,t){t?.querySelectorAll(".search-match").forEach((e=>{e.insertAdjacentHTML("beforebegin",e.innerHTML),e.remove()})),t.style.removeProperty("display")})),DPFNS.upadateViewingStatus(e,t)},sortTable:function(e,t){let a=!0,n='[data-lrs-dpg-elm="items-list"]',r='[data-key="'+t.currentViewValues.orderBy+'"]',o=e.find(n),i=e.find(n+">*"),s=document.createElement(o[0]?.tagName??"div"),l=[];$.each(i,(function(e,t){let n=$(t).find(r),o=n.attr("data-value")??n.text()??"";o.match(/[0-9\.]{1,15}/)||(a=!1),o=a&&!isNaN(parseFloat(o))?parseFloat(o):o.toLowerCase(),l.push({p:e,v:o})}));var c,u;c=l,u=t.currentViewValues.orderByIn??"asc",l="desc"==u?c.sort(((e,t)=>e.v>t.v?-1:e.v<t.v?1:0)):c.sort(((e,t)=>e.v<t.v?-1:e.v>t.v?1:0)),l.forEach((e=>{s.appendChild(i[e.p])})),o.html(s.innerHTML),s.remove(),o.attr("data-sorted-on",t.currentViewValues.orderBy??"")}},DPGURLS={splitURLToParams:function(e){let t={ref:"",gets:{}};e=e||window.location.href;let a=(e=decodeURIComponent(e)).split("?"),n=a.length>1?a.pop():"";function r(e){if(Boolean(e)&&"object"==typeof e&&!Array.isArray(e))return keysSorter(e);{let t=parseFloat(e);return isNaN(t)?e:t%1==0?Math.floor(t):t}}if(t.ref=a[0],""!=n){let e={};n=n.replaceAll("+"," ");let a=n.split("&");for(var o=0;o<a.length;o++){let t=a[o].split("="),n=t[0],[s,l]=n.split("[",2);if(l){keyParts.unshift(s);var i=keyParts.pop();keyParts.reduce(((e,t)=>e[t]=e[t]||{}),e)[i]=r(value)}else e[n]=r(t[1])}t.gets=e}return t},currentViewPageValuesToURLParams:function(e){let t={},a=e.currentViewValues;for(let n in a){let r=e.dpParamKeys[n];if("userParams"==n){let e=a[n];e=JSON.stringify(e),e=btoa(e),t[r]=e}else t[r]=a[n]}return t},makeURLFromParams:function(e){let t=e.ref,a=function(e){if(!e)return"";let t=function e(t,a,n=!1){const r={};for(const[e,a]of Object.entries(t))r[e]=a;return Object.keys(r).map((r=>{const o=t[r];if(n&&(r=n+"["+r+"]"),void 0===o)return"";if(null===o)return encode(r,a);if("object"==typeof o){if(Array.isArray(o))return 0===o.length&&"bracket-separator"===a.arrayFormat?encode(r,a)+"[]":o.reduce(formatter(r),[]).join("&");return e(o,a,r).join("&")}return encodeURIComponent(r)+"="+encodeURIComponent(o)}))}(e);return t.join("&")}(e.gets);return t+(a.length>0?"?"+a:"")}},triggerEvents={eventPageLoaded:function(e,t){e.trigger("page-loaded",[t.currentViewValues])},eventNextClick:function(e,t){e.trigger("next-click",[t.currentViewValues])},eventPreviousClick:function(e,t){e.trigger("prev-click",[t.currentViewValues])},eventCountChanged:function(e,t){e.trigger("count-change",[t.currentViewValues])},eventSorted:function(e,t){e.trigger("sorted",[t.currentViewValues])}},calcTotalPages=function(e){let t=Math.ceil(e.totalItemsCount/e.currentViewValues.count);return 0==t?1:t},preventDefaultATag=function(e){e.on("click",(function(e){e.preventDefault()}))},loadPageAfterUpdateView=function(e,t,a=!1){let n=DPFNS.getLRSDPGElement("pagination",e).find(".page-nav");if(t.pushToHistory&&!a){let e=DPGURLS.splitURLToParams(),a={};$.extend(!0,a,e.gets,DPGURLS.currentViewPageValuesToURLParams(t)),e.gets=a;let n=DPGURLS.makeURLFromParams(e);history.pushState({state:n},"null",n)}DPFNS.setUserParamsInElement(e,t),n.html(paginationSection.paginationComponent(t)),paginationSection.setJumpToComponentView(e,t),addEventsToButtons(e,instaceId),loadPage(instaceId,e,t)},addNumberButtonEvent=function(e,t,a){a.on("click",(function(){t.currentViewValues.pageNo=parseInt($(this).closest(".number").attr("data-page-number")),setInOption(instaceId,t),loadPageAfterUpdateView(e,t)}))},addMoreButtonEvent=function(e,t,a){let n=calcTotalPages(t);a.on("click",(function(){let a=$(this),r=t.currentViewValues.pageNo,o=a.closest(".number"),i=o.parent(),s=o.prev(),l=parseInt(s.attr("data-page-number")??""),c=o.next(),u=parseInt(c.attr("data-page-number")??""),d=a.closest(".pagination").find('[data-page-number="'+r+'"]'),p="",g=0;if(l>=1&&u<=r){p="L";let e=d.next();if(e.length>0){let t=l;for(;e.length;){if(e.attr("data-page-number")==n||t+1==u)break;e.remove(),e=d.next(),g++,t++}}else{e=c;let t=l;for(;e.length;){if(e.attr("data-page-number")==n||t+1==u)break;e=e.next(),e.prev().remove(),g++,t++}}}else if(l==r&&u!=l+1){p="L";let e=c,t=l;for(;e.length;){if(e.attr("data-page-number")==n||t+1==u)break;e=e.next(),e.prev().remove(),g++,t++}}else if(l>=r&&u>=n){p="R";let e=d.prev(),t=l;for(;e.length;){if(1==e.attr("data-page-number")||t+1==u)break;e.remove(),e=d.prev(),g++,t++}}if(g<u-l){let e=s.prev();for(;e.length;){let t=e.attr("data-page-number");if(1==t||t==r||g==u-l)break;e.remove(),e=s.prev(),g++}}if(g<u-l){let e=c.next();for(;e.lengt;){let t=e.attr("data-page-number");if(t==n||t==r||g==u-l)break;e.remove(),e=c.next(),g++}}let m=[];for(;g>0&&l<u;)m.push(paginationSection.makePagerLI(++l,t)),g--;o[0]?.insertAdjacentHTML("beforebegin",m.join("")),o[0]?.remove();let f=[],h="0";$.each(i.find(".number"),(function(e,a){let n=$(a),r=n.attr("data-page-number");if(h==r)n.remove();else{let e=parseInt(r);if(isNaN(e))n.remove();else{let a=parseInt(h);a+1!==e&&n[0]?.insertAdjacentHTML("beforebegin",paginationSection.makePagerLI(a+2==e?a+1:"...",t))}f.push(e)}h=r??""}));let V=0;for(;i.find(".number").length>t.maxPagerNumbers&&($.each(i.find(".number"),(function(e,t){let a=$(t);if("..."==a.attr("data-page-number")){let e=a.prev(),t=e.attr("data-page-number");1!=t&&t!=r&&t!=n&&e.remove()}})),!(++V>10)););h="0",$.each(i.find(".number"),(function(e,t){let a=$(t),n=a.attr("data-page-number");"..."==h&&"..."==n&&a.remove(),h=n??""})),addEventsToButtons(e,instaceId)}))},addEventsToButtons=function(e,t){let a=getInOption(t),n=calcTotalPages(a),r=DPFNS.getLRSDPGElement("pagination",e),o=r.find(".page-nav"),i=o.find(".page-next"),s=o.find(".page-previous"),l=r.find('.jump-to form [name="jump-to-page"]');i[0]?.toggleAttribute("disabled",a.currentViewValues.pageNo==n),s[0]?.toggleAttribute("disabled",1==a.currentViewValues.pageNo),l.length>0&&l.val(a.currentViewValues.pageNo.toString()),i.on("click",(function(){this.hasAttribute("disabled")||(a.currentViewValues.pageNo++,setInOption(t,a),loadPageAfterUpdateView(e,a),triggerEvents.eventNextClick(e,a))})),s.on("click",(function(){this.hasAttribute("disabled")||(a.currentViewValues.pageNo--,setInOption(t,a),loadPageAfterUpdateView(e,a),triggerEvents.eventPreviousClick(e,a))})),$.each(o.find("a"),(function(){preventDefaultATag($(this))})),$.each(o.find(".pager .number.pageno>*"),(function(){addNumberButtonEvent(e,a,$(this))})),$.each(o.find(".pager .number.loadmore>*"),(function(){addMoreButtonEvent(e,a,$(this))}))},addeventListners=function(e,t,a){let n=DPFNS.getLRSDPGElement("search-box",t),r=DPFNS.getLRSDPGElement("count-select",t),o=DPFNS.getLRSDPGElement("property-head",t);t.find("form").on("submit",(function(e){e.preventDefault()})),n.find("form:not(.e-plus)").addClass("e-plus").on("submit",(async function(a){let n=getInOption(e),r=a.target,o=r?.querySelector('[name="'+n.dpParamKeys.searchIn+'"]'),i=r?.querySelector('[name="'+n.dpParamKeys.searchKey+'"]'),s=o.value,l=i.value,c=!1,u=n.currentViewValues.searchKey??"",d=n.currentViewValues.searchIn;n.clientSideSearch&&(!d||d==s)&&l.length>=u.length&&0==l.indexOf(u)&&n.totalItemsCount<=n.currentViewValues.count&&(c=!0),0==l.length?(n.currentViewValues.searchIn=void 0,n.currentViewValues.searchKey=void 0,c=!1):(n.currentViewValues.searchIn=s,n.currentViewValues.searchKey=l),setInOption(e,n);let p=!1;if(c)DPFNS.jsTableSearch(t,n);else if(n.loadedListIsComplete){n.currentViewValues.pageNo=1;let e=DPFNS.getLRSDPGElement("list-data",t),a=n.currentViewValues;if(e.length>0){let r=JSON.parse(e.attr("data-user-params"));Object.keys(r).forEach((e=>{a.userParams[e]==r[e]||(p=!0)})),0==p&&loadPageAfterUpdateView(t,n)}}else p=!0;p&&(DPFNS.contentLoader(t,n,!0),$.ajax({url:n.getInfoURL,headers:n.httpRequestHeaders,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:makeLoadRequestParams(n),dataType:"json",success:function(a){n.totalItemsCount=a.totalItemsCount??0,n.currentViewValues.pageNo=1,$.extend(!0,n,a),n=DPFNS.functionNametoFunction(n),setInOption(e,n),loadPageAfterUpdateView(t,n)},error:function(e){console.log("Unable to fetch the data from getInfoURL:"+n.getInfoURL)}}))})),n.find('form [name="'+a.dpParamKeys.searchKey+'"]:not(.e-plus)').addClass("e-plus").on("input",(function(t){if(0==this.value.length){let t=getInOption(e);t.currentViewValues.searchIn=void 0,t.currentViewValues.searchKey=void 0,setInOption(e,t),$(this).closest("form").submit()}})),t.find(".jump-to form:not(.e-plus)").addClass("e-plus").on("submit",(function(){let a=getInOption(e),n=calcTotalPages(a),r=$(this).find('[name="jump-to-page"]'),o=parseInt(r.val());o=isNaN(o)||o<1?1:o>n?n:o,r.val(o.toString()),a.currentViewValues.pageNo=o,setInOption(e,a),loadPageAfterUpdateView(t,a)})),r.find('[name="count"]:not(.e-plus)').addClass("e-plus").on("change",(function(a){let n=getInOption(e);n.currentViewValues.count=parseInt($(this).val());let r=calcTotalPages(n);n.currentViewValues.pageNo>r&&(n.currentViewValues.pageNo=r),triggerEvents.eventCountChanged(t,n),setInOption(e,n),loadPageAfterUpdateView(t,n)})),$.each(o.find(".head-sort:not(.e-plus)"),(function(){$(this).addClass("e-plus"),$(this).on("click",(function(){let n=$(this),r="data-property-key",o=this.hasAttribute(r)?n.attr(r)??"":n.find("["+r+"]")?.attr(r)??"",i=a.currentViewValues.orderByIn;i="asc"==i?"desc":"asc",a.currentViewValues.orderBy!=o&&(i="asc"),a.currentViewValues.orderByIn=i,a.currentViewValues.orderBy=o,setInOption(e,a),n.addClass(i),n.removeClass("asc"==i?"desc":"asc"),$.each(n.siblings(),(function(){$(this).removeClass("desc asc")})),a.totalItemsCount<=a.currentViewValues.count?(DPFNS.sortTable(t,a),triggerEvents.eventSorted(t,a)):(a.fromStartOnSort&&(a.currentViewValues.pageNo=1,setInOption(e,a)),a.triggerEventSorted=!0,loadPageAfterUpdateView(t,a))}))})),t.find(".dynamic-paginator-input:not(.e-plus)").addClass("e-plus").on("input",(function(){let a=getInOption(e),n=$(this);a.currentViewValues.userParams||(a.currentViewValues.userParams={}),a.currentViewValues.userParams[n.attr("name")]=n.val(),setInOption(e,a),a.userParamListener&&loadPageAfterUpdateView(t,a)})),addEventsToButtons(t,e);let i=document?.location?.search;window?.addEventListener("popstate",(function(a){let n=getInOption(e);a.preventDefault(),i!==document?.location?.search&&(i=document?.location?.search,n=DPFNS.setOptionFromVars(n),setInOption(e,n),loadPageAfterUpdateView(t,n,!0))})),"auto"==a.colorTheme&&window?.matchMedia("(prefers-color-scheme: dark)")?.addEventListener("change",(e=>{$t.toggleClass("theme-dark",!!e.matches)}))},loadPage=function(e,t,a,n){let r=DPFNS.getLRSDPGElement("items-list",t),o=!0;if(""!=a.loadListURL){if(!0!==n&&a.loadedListIsComplete){let n=DPFNS.getLRSDPGElement("list-data",t);if(n.length>0){o=!1;let i=a.currentViewValues,s=JSON.parse(n.text()),l=JSON.parse(n.attr("data-user-params"));if(Object.keys(l).forEach((e=>{i.userParams[e]!=l[e]&&(o=!0)})),0==o){let n=i.orderByIn??"asc",o=i.orderBy;if("desc"==n?s.sort(((e,t)=>e[o]>t[o]?-1:e[o]<t[o]?1:0)):s.sort(((e,t)=>e[o]<t[o]?-1:e[o]>t[o]?1:0)),i.searchKey){let e=i.searchIn??a.itemProperties[0].key,t=DPFNS.makeSearchRegEx(i.searchKey??"",a.clientSideSearchFormat);s=s.filter((a=>!!a[e].match(t)))}a.totalItemsCount=s.length;let l=s.slice((i.pageNo-1)*i.count,i.pageNo*i.count);r.html(l.map(((e,t)=>(!1!==a.itemsIndexKey&&(e[a.itemsIndexKey]=(i.pageNo-1)*i.count+t),a.makeItem(e,a.itemProperties,i.searchIn??"",i.searchKey??"")))).join("")),a.triggerEventSorted&&(a.triggerEventSorted=void 0,triggerEvents.eventSorted(t,a)),DPFNS.upadateViewingStatus(t,a),triggerEvents.eventPageLoaded(t,a),DPFNS.getLRSDPGElement("pagination",t).find(".page-nav").html(paginationSection.paginationComponent(a)),paginationSection.setJumpToComponentView(t,a),addEventsToButtons(t,e)}}}o&&(a.totalItemsCount>0?(DPFNS.contentLoader(t,a,!0),$.ajax({url:a.loadListURL,headers:a.httpRequestHeaders,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:makeLoadRequestParams(a),dataType:"json",success:function(n){DPFNS.contentLoader(t,a,!1);try{if(!Array.isArray(n))throw"Response is not an array Object";if(a.loadedListIsComplete){let r=DPFNS.getLRSDPGElement("list-data",t);return 0==r.length&&(r=$('<div style="display:none;" data-lrs-dpg-elm="list-data"></div>'),t.append(r)),r.text(JSON.stringify(n)),r.attr("data-user-params",JSON.stringify(a.currentViewValues.userParams)),a.currentViewValues.pageNo=1,void loadPage(e,t,a)}r.html(n.map(((e,t)=>(!1!==a.itemsIndexKey&&(e[a.itemsIndexKey]=(a.currentViewValues.pageNo-1)*a.currentViewValues.count+t),a.makeItem(e,a.itemProperties,a.currentViewValues.searchIn??"",a.currentViewValues.searchKey??"")))).join("")),a.triggerEventSorted&&(a.triggerEventSorted=void 0,triggerEvents.eventSorted(t,a)),DPFNS.upadateViewingStatus(t,a),triggerEvents.eventPageLoaded(t,a)}catch(e){console.error("Unable to fetch the data from loadListURL:"+a.loadListURL,e),console.log("Response Must be in Array.")}},error:function(e){console.log("Unable to fetch the data from getInfoURL:"+a.getInfoURL)}})):(DPFNS.upadateViewingStatus(t,a),DPFNS.contentLoader(t,a,!1),triggerEvents.eventPageLoaded(t,a),r.html("")))}else console.error("loadListURL is Empty.",a.loadListURL)},paginationSection={makeMakeBt:function(e,t,a,n=!0){let r="#";if(-1==t&&(n=!1),n){let e=DPGURLS.splitURLToParams(),n=DPGURLS.currentViewPageValuesToURLParams(a);n[a.dpParamKeys.pageNo]=t;for(let t in n)e.gets[t]=n[t];e.gets[a.dpParamKeys.pageNo]=t,r=DPGURLS.makeURLFromParams(e)}let o=e.replace(/\{\{url\}\}/gm,r);if(o=o.replace(/\{\{pageNo\}\}/gm,t.toString()),t==a.currentViewValues.pageNo){let e=document.createElement("div");e.innerHTML=o,e.firstElementChild?.classList.add("active"),o=e.innerHTML}return o},makePagerLI:function(e,t,a=""){let n=t.paginationBlock;return`<li class="number ${("..."==e?"loadmore":"pageno")+" "+a}" data-page-number="${e}">`+("..."==e?this.makeMakeBt(n.template.more,-1,t,!1):this.makeMakeBt(n.template.pageNumber,e,t))+"</li>"},generatePageNumbers:function(e,t,a){let n=[],r=[],o=[],i=Math.floor(a/2)-2,s=0,l=0;for(s=t-1;s>1&&l<i;s--,l++)r.unshift(s);for(s=t+1,l=0;s<e&&l<i;s++,l++)o.push(s);let c=2*i-o.length-r.length;if(c>0)if(o.length<i)for(s=r[0]-1,l=0;s>1&&l<c;s--,l++)r.unshift(s);else if(r.length<i)for(s=o[o.length-1]+1,l=0;s<e&&l<c;s++,l++)o.push(s);if(n=1==t||t==e?r.concat(o):r.concat([t],o),1==t&&n.length>0){let t=n[n.length-1]+1;e!=t&&n.push(t)}else if(t==e&&n.length>0){let e=n[0]-1;1!=e&&n.unshift(e)}n[0]-1>=2?(e-n[n.length-1]>=2&&n.shift(),n.unshift("...")):n[0]-1>1&&n.unshift(n[0]-1),n.unshift(1);let u=n.length-1;return e-n[u]>=2?n.push("..."):e-n[u]>1&&n.push(n[u]+1),e>1&&n.push(e),n},setJumpToComponentView:function(e,t){let a=DPFNS.getLRSDPGElement("pagination",e),n=1==calcTotalPages(t)&&1==t.paginationBlock.hideOnSinglePage;a.find(".jump-to").toggleClass("d-none",n)},jumpToComponent:e=>1==calcTotalPages(e)&&1==e.paginationBlock.hideOnSinglePage?"":e.paginationBlock.jumpTo?'<div class="jump-to">'+e.paginationBlock.template.jumpTo+"</div>":"",paginationComponent(e){let t=e.paginationBlock,a=calcTotalPages(e);if(1==a&&1==t.hideOnSinglePage)return"";let n=e.currentViewValues.pageNo,r=e.maxPagerNumbers,o=paginationSection.generatePageNumbers(a,n,r),i=paginationSection.makeMakeBt(t.template.previous,1==n?-1:n-1,e),s=paginationSection.makeMakeBt(t.template.next,n==a?-1:n+1,e),l='<ul class="pager">'+o.map((t=>paginationSection.makePagerLI(t,e))).join("")+"</ul>";return`<div class="pagination${0==e.paginationBlock.template.background?" dpg-no-bg":""}">`+i+l+s+"</div>"}},intiatePaginator=function(e,t,a=!1){t.addClass("lrs-dynamic-paginator");let n=(a=0==a?getInOption(e):a).viewTemplate??"";if(("auto"==a.colorTheme&&window?.matchMedia&&window?.matchMedia("(prefers-color-scheme: dark)").matches||"dark"==a.colorTheme)&&t.addClass("theme-dark"),n=n.replace(/(\>)\{\{propertiesLabel\}\}(\<)/gm," data-lrs-dpg-elm='property-head'$1"+a.itemProperties.map((e=>a.makeItemPropertyLabel(e,a.indexedItemPropertiesKeys.indexOf(e.key)>-1,a.currentViewValues?.orderBy==e.key&&a.currentViewValues?.orderByIn))).join("")+"$2"),n=n.replace(/(\>)\{\{itemsList\}\}(\<)/gm," data-lrs-dpg-elm='items-list'$1$2"),n=n.replace(/(\>)\{\{viewingStatus\}\}(\<)/gm," data-lrs-dpg-elm='viewing-status'$1$2"),n=n.replace(/(\>)\{\{searchBox\}\}(\<)/gm," data-lrs-dpg-elm='search-box'$1"+a.makeSearchBox(a)+"$2"),0!=a.setCountsPerPage){let e=a.setCountsPerPage;n=n.replace(/(\>)\{\{countsPerPage\}\}(\<)/gm," data-lrs-dpg-elm='count-select'$1"+a.makeCountSelection(a.dpParamKeys.count,a.currentViewValues.count,a.totalItemsCount,e)+"$2")}n=n.replace(/(\>)\{\{paginationContent\}\}(\<)/gm," data-lrs-dpg-elm='pagination'$1<div class='d-flex'><div class='page-nav'>"+paginationSection.paginationComponent(a)+"</div>"+paginationSection.jumpToComponent(a)+"$2"),t.html(n),t.prepend("<style>"+['.lrs-dynamic-paginator.theme-dark [data-lrs-dpg-elm="property-head"]','.lrs-dynamic-paginator [data-lrs-dpg-elm="property-head"]'].map(((e,t)=>[!1,"asc","desc"].map((a=>e+" .head-sort"+(0==a?"":"."+a)+"{background-image:"+DPFNS.generateSortImageURL(a,0==t)+"}")).join(""))).join("")+"</style>"),a.currentViewValues.userParams&&DPFNS.setUserParamsInElement(t,a),$.each(t.find(".dynamic-paginator-input[name]"),(function(e,t){console.log(t.name,t.value);let n=t.name,r=t.value;a.currentViewValues.userParams=a.currentViewValues?.userParams??{},a.currentViewValues.userParams[n]=r})),setInOption(instaceId,a),loadPage(instaceId,t,a),addeventListners(instaceId,t,a)},newOption={},instaceId=instancekey(15);$.extend(!0,newOption,dpg_default_option,options),$t.attr("data-lrsdpg-instance",instaceId),newOption=DPFNS.setOptionFromVars(newOption);let freshLoad=function(e,t){""==t.getInfoURL?(t=DPFNS.functionNametoFunction(t),setInOption(e,$t,t),intiatePaginator(e,$t,t)):$.ajax({url:t.getInfoURL,headers:t.httpRequestHeaders,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:makeLoadRequestParams(t),dataType:"json",success:function(a){$.extend(!0,t,a),t=DPFNS.functionNametoFunction(t),t=DPFNS.setOptionFromVars(t),setInOption(e,t),intiatePaginator(e,$t,t)},error:function(e){console.log("Unable to fetch the data from getInfoURL:"+t.getInfoURL)}})};return freshLoad(instaceId,newOption),this.reload=function(){let e=getInOption(instaceId);return freshLoad(instaceId,e),this},this.reloadList=function(){let e=getInOption(instaceId),t=DPFNS.getLRSDPGElement,a=t("pagination",$t).find(".page-nav"),n=t("count-select",$t);n&&n.html(e.makeCountSelection(e.dpParamKeys.count,e.currentViewValues.count,e.totalItemsCount,e.setCountsPerPage));let r=t("search-box",$t);r&&r.html(e.makeSearchBox(e));let o=t("property-head",$t);return o&&o.html(e.itemProperties.map((t=>e.makeItemPropertyLabel(t,e.indexedItemPropertiesKeys.indexOf(t.key)>-1,e.currentViewValues?.orderBy==t.key&&e.currentViewValues?.orderByIn))).join("")),""==e.getInfoURL?(a.html(paginationSection.paginationComponent(e)),paginationSection.setJumpToComponentView($t,e),addeventListners(instaceId,$t,e),loadPage(instaceId,$t,e)):(DPFNS.contentLoader($t,e,!0),$.ajax({url:e.getInfoURL,headers:e.httpRequestHeaders,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:makeLoadRequestParams(e),dataType:"json",success:function(t){$.extend(!0,e,t),e=DPFNS.functionNametoFunction(e),e=DPFNS.setOptionFromVars(e),setInOption(instaceId,e),a.html(paginationSection.paginationComponent(e)),paginationSection.setJumpToComponentView($t,e),addeventListners(instaceId,$t,e),loadPage(instaceId,$t,e,!0)},error:function(t){console.log("Unable to fetch the data from getInfoURL:"+e.getInfoURL)}})),this},this.setViewValues=function(e,t,a,n,r,o){let i=getInOption(instaceId);return(e=parseInt(e))>0&&(i.currentViewValues.pageNo=e),(t=parseInt(t))>0&&(i.currentViewValues.count=t),"string"==typeof a&&(i.currentViewValues.orderBy=a),"asc"!=n&&"desc"!=n||(i.currentViewValues.orderByIn=n),"string"==typeof r&&(i.currentViewValues.searchIn=r),"string"==typeof o&&(i.currentViewValues.searchKey=o),setInOption(instaceId,i),this},this.refreshList=function(){let e=getInOption(instaceId);return loadPageAfterUpdateView($t,e),this},this.instaceId=instaceId,this}})(jQuery);